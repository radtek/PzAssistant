一、修改过的数据库表
（一）工作数据库
1、凭证表(ok)
2、业务活动表(ok)
3、新增SubjectExtraDirs表，记录各个一级科目的余额方向；(ok)
4、明细科目余额表（detailExtras）中增加一个表示余额方向的字段(ok)
5、在一级科目表中增加一个字段，表示此科目的借贷方向规则（ok）
    （1：增加在借方，减少在贷方；0：增加在贷方，减少在借方）
6、在FSAgent表中增加一个字段，记录是否在本账户中启用此明细科目（ok）。


7、新增子窗口信息文件（winEnum是字窗口类别枚举值，x,y,w,h是字窗口最后一次关闭时的位置和大小尺寸，tblInfo是子窗体内表格各列的宽度信息）
CREATE TABLE subWinInfos(id INTEGER PRIMARY KEY,winEnum INTEGER,x INTEGER,y INTEGER,w INTEGER,h INTEGER,tblInfo BLOB)

8、

7、调整业务活动编辑功能，在按下 CTL + = 时，自动复制上一个业务活动到下面一行（末尾添加或当前位置插入）

8、实现业务活动的复制、剪切和粘贴功能(ok)

9、

（二）基本数据库
增加下面的表
1、账户信息表
create table basic.AccountInfos(id INTEGER PRIMARY KEY,code TEXT,usedSubSys INTEGER,filename TEXT,name TEXT,lname TEXT)
2、配置变量表
create table basic.configs(id INTEGER PRIMARY KEY,type INTEGER,name TEXT,value TEXT)




#########################################################################
1、使用FSAgent表的FrequencyStat字段保存的使用频度，以其最大者作为每个主科目下的默认子科目，一般在录入凭证的业务活动时，提高录入速度；
    新增一个全局标量，保存此设置，在打开账户的初始化阶段初始化，并且还有按照一定的策略进行更新（比如定时更新）；



2、实现凭证的的插入、复制、剪切和粘贴功能

3、

4、

5、在每次打开凭证集时，根据当前凭证集内的凭证状态，并（可能）结合数据库内记录的凭证集状态，
   来更新凭证集的状态（要在主窗口类中增加一个成员记录此，并据此来启用/禁用某些Action）





###########近期要改进的#######################################


1、调整高级凭证操作工具条出现时机及其按钮的启用时机（按钮的提示信息根据凭证的状态来决定）

2、

3、在凭证集内的某个记账凭证的数据（一二级科目、币种、金额等）发生改变时，必须调整凭证集状态使其回到未
   保存余额的状态。

4、本期统计，在结转后，明明主营业务收入已经归零，但还是显示借方，好像小数点2位后还有数字。
   没有将结转后余额归零的科目显示出来，感觉好像此科目当前没有发生过一样。

5、对结转凭证的审核，将自动将此凭证入账

6、在日记账列表中增加几个隐藏列（或只是在生成的数据中包含），用于支持当鼠标悬停在金额列时，
   显示其中没有显示的人民币部分的金额值
   当然，在本期统计表格中也有相应的需求。

7、在账户初始化时读取账户使用的科目类型和报表类型等信息到全局变量（ok）。

8、增删凭证按钮的有效性控制

9、业务活动增删和移动按钮的有效性控制（ok）。

10、将汇率设置入口移到专门到菜单项中。

11、在选中一行的情况下，可以使用上下箭头来上下移动。

12、改进PzDialog2::isEditable()方法的实现



################################################################
远期改进：
1、当在二级科目编辑器内选择一个二级科目时（还未提交给表格），显示该科目到详细名称，以帮助用户正确区分。

2、对附加账户和分离账户到功能需求，再进行仔细考量,确定明确到需求。

3、在凭证窗口打开到情况下，当执行全部审核或全部入账时，适时更新当前显示凭证到状态。

4、在设置开户行信息窗口中，增设确定，保存和取消按钮。并增加数据改变检测机制。

5、创建结转汇兑损益凭证，目前是不管余额是否为0，总是创建3张凭证，合理的形式是根据银行、应收/应付
的外币余额是否为零来决定是否创建对应凭证。那么，在判定是否已存在此类凭证是，也因这样考虑。

################################################################3
远期功能需求：
1、计算器
2、普通电子表格
3、便辑表功能



#############################################################

//紧急任务
5、

4、对于损益类科目的本期统计，要去除结转损益类科目时产生的会计分录。

3、科目选择框的完成器，在使用键盘第一排数字键时无法识别，但使用数字小键盘可以。

2、在帮助窗口中，添加显示应用程序版本修正历史信息的功能。

1、为了进行一般化处理，考虑将需要按币种分开核算的科目，在科目配置中有反映。


##########################################################3
进行中的任务：
3、固定资产管理界面
    如果固定资产已经开始折旧，则不能更改固定资产的某些信息（比如购买日期、买入价、残值、折旧年限、
    资产类别和科目类别等，更不能删除该固定资产）

2、分页打印文档的功能（始于2011-11-20）
    有待改进的缺陷，打印模板的表格视图的边框的去除。
    明细帐的打印分页是针对某个明细科目（甚至还要考虑特定的币种），因此，如果在视图中指定了所有明细科目或所有
    货币类型时，还要考虑这些特殊情况（这时，因为屏幕视图中显示的是所有明细科目或所有币种的发生列表，
    在这种情况下，必须遍历所有明细科目，按每个明细科目进行打印的分页处理），现阶段，如果不能处理这种情况，必须
    在视图没有指定某个明细科目或某个币种时，禁用打印功能。

1、当当前凭证集状态改变时，通知相关子窗口（比如本期统计子窗口，需要更新凭证集状态，但如果是凭证状态从审核态
变为记账态或反之，必须重新进行计算汇总，以便及时更新）；
    实现思路：
        （1）更新凭证集状态：在MainWindow::refreshShowPzsState()方法中，调用相关子窗口到对应方法。
        （2）对于要影响计算结果的凭证状态改变，需要在主窗口类定义一个槽，在pzdialog2类内定义一个信号，
        在pzdialog2.save()方法内触发此信号。（这个信号有别于在浏览凭证时触发的凭证状态改变信号）



